<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>焊接H型钢T型钢理论重量</title>
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>

    <div id="vue">
        <header>
            <h2>焊接H型钢T型钢理论重量</h2>
        </header>
        <table>
            <th></th>
        </table>
    </div>

    <div class="content">

        <label for="model">规格：</label>
        <input type="text" value="100" id="model" />
        <br /><br />
        理论重量：<span id="miweight"></span> kg/m
        <br />
        外表面积：<span id="miarea"></span> m<sup>2</sup>/m
    </div>

    <script src="lib/vue.js"></script>
    <script>
        // var dens = {steel: 7.85, stSteel: 7.93, copper:8.9, aluminium: 2.7, castIron: 7.3};
        var density = 7.85;

        function copyToClip(target) {
            var transfer = document.createElement('input');
            document.body.appendChild(transfer);
            transfer.value = target;

            transfer.focus();
            transfer.select();
            if (document.execCommand("Copy")) {
                document.execCommand("Copy");
            }
            document.body.removeChild(transfer);
        }

        function weightH(h, b, t1, t2){
            return ((h - t2 * 2) * t1 + (b * t2) * 2) * density / 1000;
        }

        function weightT(h, b, t1, t2){
            return ((h - t2)* t1 + (b * t2)) * density / 1000;
        }

        function areaH(h, b, t1, t2){
            return ((h + b) * 2 + (b - t1) * 2) / 1000 ;
        }

        function areaT(h, b, t1, t2){
            return (h + b) *2 / 1000;
        }

        function parseModel(str){
            var h, b, t1, t2;
            var re = /\d+|\d+\.d+/g;

            console.log(str.search(re));
            
            return {};
        }
        parseModel("23*34*56*78");

        function calculate(){
            var modelString = document.getElementById("model").value;
            var miweight, miarea;


            var shape = document.getElementById("shape");
            if (shape.value=="HShapeSteel"){
                miweight = weightH(h, b, t1, t2);
                miarea = areaH(h, b, t1, t2);

            }else{
                miweight = weightT(h, b, t1, t2);
                miarea = areaT(h, b, t1, t2);
            }
            document.getElementById("miweight").innerHTML = miweight.toFixed(2);
            document.getElementById("miarea").innerHTML = miarea.toFixed(2);
        }
        // calculate();

        document.getElementById("shape").onchange = calculate;
        document.getElementById("model").onchange = calculate;
    </script>
</body>
</html>